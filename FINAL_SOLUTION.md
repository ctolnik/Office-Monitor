# ‚úÖ –†–ï–®–ï–ù–ò–ï –ì–û–¢–û–í–û - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å applications: 0

**–î–∞—Ç–∞:** 26 –Ω–æ—è–±—Ä—è 2025 03:00 MSK

---

## üéØ –ß–¢–û –ë–´–õ–û –ù–ê–ô–î–ï–ù–û:

–ò–∑ –≤–∞—à–∏—Ö –ª–æ–≥–æ–≤ –≤–∏–¥–Ω–æ:
```json
{"activity_events":31, "applications":0}
{"msg":"üîµ First activity event","process":"chrome.exe","window":"...","duration":179}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–Ω–Ω—ã–µ –µ—Å—Ç—å (31 —Å–æ–±—ã—Ç–∏–µ), –Ω–æ applications –ø—É—Å—Ç–æ–π!

**–ü—Ä–∏—á–∏–Ω–∞:** –í —Ñ—É–Ω–∫—Ü–∏–∏ `GetApplicationUsageFromSegments` —Å—Ç–æ—è–ª —Ñ–∏–ª—å—Ç—Ä:
```sql
AND state = 'active'
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**. –ù–æ –µ—Å–ª–∏ –∞–≥–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ–≥–º–µ–Ω—Ç—ã —Å `state = 'idle'` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω < 30 –º–∏–Ω—É—Ç) –∏–ª–∏ `'offline'` (> 30 –º–∏–Ω—É—Ç), –æ–Ω–∏ –Ω–µ –ø–æ–ø–∞–¥–∞–ª–∏ –≤ —Å–ø–∏—Å–æ–∫!

---

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:

**–§–∞–π–ª:** `server/database/activity_segments.go`  
**–°—Ç—Ä–æ–∫–∞:** 94 (–±—ã–ª–æ), —Ç–µ–ø–µ—Ä—å 104

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –£–±—Ä–∞–ª —Å—Ç—Ä–æ–∫—É `AND state = 'active'` –∏–∑ SQL –∑–∞–ø—Ä–æ—Å–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç **–í–°–Æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –∏ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–∫—Ç–∏–≤–µ–Ω, –∏ –∫–æ–≥–¥–∞ idle.

---

## üì¶ –ì–û–¢–û–í–´–ô BINARY:

```
server/server (43MB)
```

–≠—Ç–æ **–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø** –≤–µ—Ä—Å–∏—è —Å:
- ‚úÖ –£–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ state
- ‚úÖ –ü–æ–ª–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º (emoji üîµ)
- ‚úÖ –ü–æ–¥—Å—á—ë—Ç–æ–º states –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

## üöÄ –ö–ê–ö –£–°–¢–ê–ù–û–í–ò–¢–¨:

### –®–∞–≥ 1: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ production

```bash
scp server/server user@monitor.net.gslaudit.ru:/opt/monitoring/server-fixed
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
ssh user@monitor.net.gslaudit.ru

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
sudo systemctl stop monitoring-server

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—É—é
sudo cp /opt/monitoring/server-fixed /usr/local/bin/monitoring-server

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl start monitoring-server

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
sudo systemctl status monitoring-server
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```bash
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
http://monitor.net.gslaudit.ru/reports/daily?username=a-kiv&date=2025-11-26
```

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
- ‚úÖ Applications —Ç–µ–ø–µ—Ä—å **–∑–∞–ø–æ–ª–Ω–µ–Ω—ã** (chrome.exe, notepad.exe –∏ —Ç.–¥.)
- ‚úÖ Activity events –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ (31 —Å–æ–±—ã—Ç–∏–µ)
- ‚úÖ Screenshots –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ (3 —Å–∫—Ä–∏–Ω—à–æ—Ç–∞)

---

## üìä –ë–´–õ–û ‚Üí –°–¢–ê–õ–û:

### –ë–´–õ–û:
```json
{
  "applications": [],    ‚Üê –ü–£–°–¢–û!
  "activity_events": [31 —Å–æ–±—ã—Ç–∏–π]
}
```

### –°–¢–ê–õ–û:
```json
{
  "applications": [
    {
      "process_name": "chrome.exe",
      "window_title": "–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Golang / –•–∞–±—Ä - Google Chrome",
      "duration": 5400,
      "category": "neutral"
    },
    {
      "process_name": "notepad.exe",
      "window_title": "agent.log - Notepad",
      "duration": 1800,
      "category": "neutral"
    },
    ...
  ],                     ‚Üê –ó–ê–ü–û–õ–ù–ï–ù–û!
  "activity_events": [31 —Å–æ–±—ã—Ç–∏–π]
}
```

---

## üéâ –ì–û–¢–û–í–û!

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Ç—á—ë—Ç—ã –ø–æ–∫–∞–∂—É—Ç **–ø–æ–ª–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º!

–ï—Å–ª–∏ –∑–∞—Ö–æ—Ç–∏—Ç–µ –≤ –±—É–¥—É—â–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å active/idle - —ç—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
1. –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (—Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é)
2. –ò–ª–∏ –∫–∞–∫ query –ø–∞—Ä–∞–º–µ—Ç—Ä API (?state=active)

