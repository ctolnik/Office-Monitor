# Frontend Task: Activity Tracking & Reporting Dashboard

## –û–±–∑–æ—Ä –∑–∞–¥–∞—á–∏

–î–æ–±–∞–≤–∏—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π React/TypeScript dashboard –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å/–ø—Ä–æ—Å—Ç–æ–π/–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ) –∏ —É–¥–æ–±–Ω–æ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º –ø–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏—è–º.

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–í —Å–∏—Å—Ç–µ–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤. –ê–≥–µ–Ω—Ç –Ω–∞ —Ä–∞–±–æ—á–∏—Ö —Å—Ç–∞–Ω—Ü–∏—è—Ö —Ç–µ–ø–µ—Ä—å:
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–∞–∫—Ç–∏–≤–µ–Ω/–ø—Ä–æ—Å—Ç–æ–π/–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç) –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º—ã—à–∏/–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç URL –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –æ–∫–æ–Ω –±—Ä–∞—É–∑–µ—Ä–æ–≤ (Chrome, Firefox, Edge)
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

Backend –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ API endpoints –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤.

---

## 1. –ù–æ–≤—ã–µ API Endpoints

### 1.1. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)

**Endpoint:** `GET /api/activity/summary`

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `computer_name` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –∏–º—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
- `date` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) - –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YYYY-MM-DD`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ–≥–æ–¥–Ω—è

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```http
GET /api/activity/summary?computer_name=PC001&date=2025-11-23
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface DailyActivitySummary {
  date: string;                    // "2025-11-23"
  computer_name: string;           // "PC001"
  username: string;                // "ivanov"
  active_seconds: number;          // 16080 (4—á 28–º–∏–Ω)
  idle_seconds: number;            // 21840 (6—á 4–º–∏–Ω)
  offline_seconds: number;         // 48600 (13—á 30–º–∏–Ω)
  top_programs: ProgramUsage[];    // –¢–æ–ø-10 –ø—Ä–æ–≥—Ä–∞–º–º
}

interface ProgramUsage {
  process_name: string;            // "chrome.exe"
  friendly_name: string;           // "chrome.exe" (!!!)
  duration_sec: number;            // 8100 (2—á 15–º–∏–Ω)
  window_titles?: string[];        // ["–ü–æ—á—Ç–∞ ‚Äî mail.yandex.ru", "–î–æ–∫—É–º–µ–Ω—Ç—ã ‚Äî docs.google.com"]
}
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ü–æ–ª–µ `friendly_name` **–≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–Ω–æ `process_name`**. Backend –µ—â–µ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª JOIN —Å —Ç–∞–±–ª–∏—Ü–µ–π `process_catalog`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `process_name` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞ –∫–æ–≥–¥–∞ backend –¥–æ–±–∞–≤–∏—Ç mapping, –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ `friendly_name`.

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –≠—Ç–æ—Ç endpoint –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å **500 Internal Server Error** –ø–æ–∫–∞ ClickHouse materialized views –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ + fallback –Ω–∞ empty state.

---

### 1.2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–¥–ª—è timeline)

**Endpoint:** `GET /api/activity/segments`

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `computer_name` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –∏–º—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
- `date` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) - –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YYYY-MM-DD`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ–≥–æ–¥–Ω—è

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```http
GET /api/activity/segments?computer_name=PC001&date=2025-11-23
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface ActivitySegment {
  timestamp_start: string;         // "2025-11-23T09:15:00Z"
  timestamp_end: string;           // "2025-11-23T09:45:00Z"
  duration_sec: number;            // 1800 (30 –º–∏–Ω)
  state: "active" | "idle" | "offline";
  process_name: string;            // "chrome.exe"
  window_title: string;            // "–ü–æ—á—Ç–∞ ‚Äî mail.yandex.ru"
  computer_name: string;           // "PC001"
  username: string;                // "ivanov"
}

type ActivitySegmentsResponse = ActivitySegment[];
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –≠—Ç–æ—Ç endpoint –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è **timeline visualization**. –ö–∞–∂–¥—ã–π —Å–µ–≥–º–µ–Ω—Ç - —ç—Ç–æ –ø–µ—Ä–∏–æ–¥ –≤—Ä–µ–º–µ–Ω–∏ —Å –æ–¥–Ω–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –æ–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π.

**–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```typescript
// –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –ø–æ 30-–º–∏–Ω—É—Ç–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º –¥–ª—è timeline
function buildTimeline(segments: ActivitySegment[]) {
  const intervals = Array.from({ length: 48 }, (_, i) => {
    const hour = Math.floor(i / 2);
    const minute = (i % 2) * 30;
    return {
      time: `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`,
      state: 'offline' as const,
      program: '',
    };
  });
  
  // –ó–∞–ø–æ–ª–Ω–∏—Ç—å intervals –Ω–∞ –æ—Å–Ω–æ–≤–µ segments...
  return intervals;
}
```

---

### 1.3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º –ø—Ä–æ–≥—Ä–∞–º–º (Process Catalog)

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∏–º–µ–Ω–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ —É–¥–æ–±–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏.

#### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏

**Endpoint:** `GET /api/process-catalog`

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```typescript
interface ProcessCatalogEntry {
  id: string;
  friendly_name: string;           // "Google Chrome"
  process_names: string[];         // ["chrome.exe"]
  window_title_patterns: string[]; // ["*mail.yandex.ru*"]
  category: string;                // "browsing" | "work" | "communication" | "development" | "other"
  is_active: boolean;
  created_at: string;              // ISO timestamp
  updated_at: string;              // ISO timestamp
}
```

#### –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å

**Endpoint:** `POST /api/process-catalog`

**Request body:**
```json
{
  "friendly_name": "Google Chrome",
  "process_names": ["chrome.exe"],
  "window_title_patterns": [],
  "category": "browsing"
}
```

#### –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å

**Endpoint:** `PUT /api/process-catalog/:id`

**Request body:** (—Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏)

#### –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å

**Endpoint:** `DELETE /api/process-catalog/:id`

---

## 2. UI Components - —á—Ç–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å

### 2.1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–û—Ç—á–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏" (Activity Report)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –º–µ–Ω—é

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

#### 2.1.1. –§–∏–ª—å—Ç—Ä—ã
- **–°–æ—Ç—Ä—É–¥–Ω–∏–∫** (–≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Å autocomplete)
- **–î–∞—Ç–∞** (date picker, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ–≥–æ–¥–Ω—è)
- **–ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç—á–µ—Ç"**

#### 2.1.2. –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π (Summary Cards)

–¢—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Ä—è–¥ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å   ‚îÇ  ‚îÇ ‚è∏Ô∏è  –ü—Ä–æ—Å—Ç–æ–π     ‚îÇ  ‚îÇ ‚ö´ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ   ‚îÇ
‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ
‚îÇ   4—á 28–º–∏–Ω      ‚îÇ  ‚îÇ   6—á 4–º–∏–Ω       ‚îÇ  ‚îÇ   13—á 30–º–∏–Ω     ‚îÇ
‚îÇ   (28.0%)       ‚îÇ  ‚îÇ   (37.5%)       ‚îÇ  ‚îÇ   (84.4%)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–î–∏–∑–∞–π–Ω:**
- –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ñ–µ–ª—Ç—ã–π/–æ—Ä–∞–Ω–∂–µ–≤—ã–π –¥–ª—è –ø—Ä–æ—Å—Ç–æ—è
- –°–µ—Ä—ã–π –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è
- –ü—Ä–æ—Ü–µ–Ω—Ç—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç 16 —á–∞—Å–æ–≤ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (08:00-24:00)

#### 2.1.3. –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ (Timeline Chart)

–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è:

```
08:00 ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ 24:00
      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñì‚ñì‚ñì‚ñì
      
–õ–µ–≥–µ–Ω–¥–∞:
‚ñà –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å  ‚ñë –ü—Ä–æ—Å—Ç–æ–π  ‚ñì –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ
```

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Recharts –∏–ª–∏ Chart.js –¥–ª—è timeline visualization

**–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –†–∞–∑–±–∏—Ç—å –¥–µ–Ω—å –Ω–∞ 30-–º–∏–Ω—É—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
- –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
- –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (hover) –ø–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏:
  - –í—Ä–µ–º—è: 14:00 - 14:30
  - –°–æ—Å—Ç–æ—è–Ω–∏–µ: –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  - –ü—Ä–æ–≥—Ä–∞–º–º–∞: Google Chrome
  - –î–µ—Ç–∞–ª–∏: mail.yandex.ru

#### 2.1.4. –¢–∞–±–ª–∏—Ü–∞ "–¢–æ–ø –ø—Ä–æ–≥—Ä–∞–º–º" (Top Programs)

–¢–∞–±–ª–∏—Ü–∞ —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π:

| # | –ü—Ä–æ–≥—Ä–∞–º–º–∞ | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã | % –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ | –î–µ—Ç–∞–ª–∏ |
|---|-----------|-----------|--------------|-----------------|---------|
| 1 | Google Chrome | –ë—Ä–∞—É–∑–µ—Ä | 2—á 15–º–∏–Ω | 50.0% | [–ü–æ–∫–∞–∑–∞—Ç—å] |
| 2 | 1–° –ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ | –†–∞–±–æ—Ç–∞ | 1—á 30–º–∏–Ω | 33.3% | [–ü–æ–∫–∞–∑–∞—Ç—å] |
| 3 | Microsoft Word | –†–∞–±–æ—Ç–∞ | 45–º–∏–Ω | 16.7% | [–ü–æ–∫–∞–∑–∞—Ç—å] |

**–ö–æ–ª–æ–Ω–∫–∏:**
- **#** - –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä
- **–ü—Ä–æ–≥—Ä–∞–º–º–∞** - `friendly_name` (–ø–æ–∫–∞ –±—É–¥–µ—Ç `process_name`)
- **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** - `category` (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–∫–æ–Ω–∫—É)
- **–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã** - `duration_sec` –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (—á—á:–º–∏–Ω)
- **% –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** - –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç `active_seconds`
- **–î–µ—Ç–∞–ª–∏** - –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è window_titles

**–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏":**
–†–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –±–ª–æ–∫ —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö —Å–∞–π—Ç–æ–≤/–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
```
üìÑ window_titles:
  ‚Ä¢ –ü–æ—á—Ç–∞ ‚Äî mail.yandex.ru (45 –º–∏–Ω)
  ‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç—ã ‚Äî docs.google.com (30 –º–∏–Ω)
  ‚Ä¢ GitHub ‚Äî github.com (1—á 0–º–∏–Ω)
```

**–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (—É–±—ã–≤–∞–Ω–∏–µ), –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º

---

### 2.2. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å "–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º" (Process Catalog Admin)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

#### 2.2.1. –¢–∞–±–ª–∏—Ü–∞ –∑–∞–ø–∏—Å–µ–π

| –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã | –ü—Ä–æ—Ü–µ—Å—Å—ã | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û–±–Ω–æ–≤–ª–µ–Ω–æ | –î–µ–π—Å—Ç–≤–∏—è |
|-------------------|----------|-----------|-----------|----------|
| Google Chrome | chrome.exe | –ë—Ä–∞—É–∑–µ—Ä | 23.11.2025 | ‚úèÔ∏è üóëÔ∏è |
| 1–° –ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ | 1C.exe, 1Cvs.exe | –†–∞–±–æ—Ç–∞ | 22.11.2025 | ‚úèÔ∏è üóëÔ∏è |

#### 2.2.2. –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü–æ–ª—è:**
- **–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã** (text input) - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ
  - Placeholder: "Google Chrome"
  
- **–ü—Ä–æ—Ü–µ—Å—Å—ã** (tags input) - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ
  - Placeholder: "chrome.exe"
  - –ö–Ω–æ–ø–∫–∞ "+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å"
  
- **–ü–∞—Ç—Ç–µ—Ä–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –æ–∫–æ–Ω** (tags input) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ
  - Placeholder: "*mail.yandex.ru*"
  - –ü–æ–¥—Å–∫–∞–∑–∫–∞: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ * –¥–ª—è wildcard matching"
  
- **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** (select dropdown)
  - –û–ø—Ü–∏–∏: "–†–∞–±–æ—Ç–∞", "–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è", "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞", "–ë—Ä–∞—É–∑–µ—Ä", "–î—Ä—É–≥–æ–µ"

**–ö–Ω–æ–ø–∫–∏:**
- "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
- "–û—Ç–º–µ–Ω–∞"

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å
- –ò–º–µ–Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–æ–ª–∂–Ω—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ .exe (Windows)

---

## 3. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 3.1. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏

```typescript
function formatDuration(seconds: number): string {
  const hours = Math.floor(seconds / 3600);
  const minutes = Math.floor((seconds % 3600) / 60);
  
  if (hours > 0) {
    return `${hours}—á ${minutes}–º–∏–Ω`;
  }
  return `${minutes}–º–∏–Ω`;
}

// –ü—Ä–∏–º–µ—Ä—ã:
formatDuration(16080) // "4—á 28–º–∏–Ω"
formatDuration(21840) // "6—á 4–º–∏–Ω"
formatDuration(1800)  // "30–º–∏–Ω"
```

### 3.2. –†–∞—Å—á–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤

```typescript
function calculatePercentage(seconds: number, totalSeconds: number): string {
  const percent = (seconds / totalSeconds) * 100;
  return `${percent.toFixed(1)}%`;
}

// –ü—Ä–∏–º–µ—Ä:
// –†–∞–±–æ—á–∏–π –¥–µ–Ω—å 16 —á–∞—Å–æ–≤ = 57600 —Å–µ–∫—É–Ω–¥
calculatePercentage(16080, 57600) // "27.9%"
```

### 3.3. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ window_titles

–ï—Å–ª–∏ –≤ `window_titles` –º–Ω–æ–≥–æ –∑–∞–ø–∏—Å–µ–π —Å –æ–¥–Ω–∏–º –¥–æ–º–µ–Ω–æ–º, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –∏—Ö:

```typescript
// –í—Ö–æ–¥:
["–ü–æ—á—Ç–∞ ‚Äî mail.yandex.ru", "–ö–∞–ª–µ–Ω–¥–∞—Ä—å ‚Äî mail.yandex.ru", "–ù–æ–≤–æ—Å—Ç–∏ ‚Äî mail.yandex.ru"]

// –í—ã—Ö–æ–¥:
"mail.yandex.ru (3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã)"
```

---

## 4. –î–∏–∑–∞–π–Ω –∏ UX —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 4.1. –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

- **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: `#10b981` (–∑–µ–ª–µ–Ω—ã–π) –∏–ª–∏ –≤–∞—à theme green
- **–ü—Ä–æ—Å—Ç–æ–π**: `#f59e0b` (–æ—Ä–∞–Ω–∂–µ–≤—ã–π/–∂–µ–ª—Ç—ã–π) –∏–ª–∏ –≤–∞—à theme warning
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ**: `#6b7280` (—Å–µ—Ä—ã–π) –∏–ª–∏ –≤–∞—à theme neutral

### 4.2. –ò–∫–æ–Ω–∫–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∏–∫–æ–Ω–æ—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É (Lucide/Heroicons):
- ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: `Activity`, `Zap`, `CheckCircle`
- ‚è∏Ô∏è  –ü—Ä–æ—Å—Ç–æ–π: `Pause`, `Clock`, `Timer`
- ‚ö´ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ: `PowerOff`, `UserX`, `MinusCircle`
- üìä –û—Ç—á–µ—Ç: `BarChart3`, `TrendingUp`
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏: `Settings`, `Sliders`

### 4.3. Responsive design

- Desktop (>1024px): –¢–∞–±–ª–∏—Ü–∞ —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- Tablet (768-1024px): –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
- Mobile (<768px): –ö–∞—Ä—Ç–æ—á–∫–∏ –≤–º–µ—Å—Ç–æ —Ç–∞–±–ª–∏—Ü—ã

### 4.4. Loading states

–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å skeleton loaders –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:
- –î–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –î–ª—è timeline chart
- –î–ª—è —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–æ–≥—Ä–∞–º–º

### 4.5. Empty states

–ï—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å:
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë   üìä  –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö                   ‚ïë
‚ïë                                    ‚ïë
‚ïë   –ó–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å     ‚ïë
‚ïë   –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞.                ‚ïë
‚ïë                                    ‚ïë
‚ïë   [–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é –¥–∞—Ç—É]            ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

## 5. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### 5.1. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ (—Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫!)

```typescript
import { useQuery } from '@tanstack/react-query';

interface ActivityReportProps {
  computerName: string;
  date: string; // "2025-11-23"
}

function ActivityReport({ computerName, date }: ActivityReportProps) {
  // Summary (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
  const { data: summary, isLoading: summaryLoading, error: summaryError } = useQuery({
    queryKey: ['activity-summary', computerName, date],
    queryFn: async () => {
      const response = await fetch(
        `/api/activity/summary?computer_name=${computerName}&date=${date}`
      );
      
      // –í–ê–ñ–ù–û: –û–±—Ä–∞–±–æ—Ç–∫–∞ 500 –æ—à–∏–±–∫–∏ –æ—Ç ClickHouse
      if (response.status === 500) {
        throw new Error('DATABASE_NOT_INITIALIZED');
      }
      
      if (!response.ok) throw new Error('Failed to fetch summary');
      return response.json() as Promise<DailyActivitySummary>;
    },
    retry: 3,
    retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 10000),
  });

  // Segments (–¥–ª—è timeline)
  const { data: segments, isLoading: segmentsLoading } = useQuery({
    queryKey: ['activity-segments', computerName, date],
    queryFn: async () => {
      const response = await fetch(
        `/api/activity/segments?computer_name=${computerName}&date=${date}`
      );
      if (!response.ok) throw new Error('Failed to fetch segments');
      return response.json() as Promise<ActivitySegment[]>;
    },
    enabled: !!summary, // –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ summary —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω
  });

  if (summaryLoading) return <LoadingSkeleton />;
  
  // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
  if (summaryError?.message === 'DATABASE_NOT_INITIALIZED') {
    return (
      <DatabaseNotInitializedError 
        message="–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –µ—â–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ init.sql"
      />
    );
  }
  
  if (summaryError) return <ErrorMessage error={summaryError} />;
  if (!summary) return <EmptyState message="–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å" />;

  return (
    <div className="space-y-6">
      <SummaryCards summary={summary} />
      <TimelineChart segments={segments || []} loading={segmentsLoading} />
      <TopProgramsTable programs={summary.top_programs} />
    </div>
  );
}
```

### 5.2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º

```typescript
import { useMutation, useQueryClient } from '@tanstack/react-query';

function ProcessCatalogForm() {
  const queryClient = useQueryClient();

  const createMutation = useMutation({
    mutationFn: async (entry: Partial<ProcessCatalogEntry>) => {
      const response = await fetch('/api/process-catalog', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(entry),
      });
      if (!response.ok) throw new Error('Failed to create');
      return response.json();
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['process-catalog'] });
      toast.success('–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫');
    },
  });

  const handleSubmit = (values: FormValues) => {
    createMutation.mutate({
      friendly_name: values.friendlyName,
      process_names: values.processNames,
      window_title_patterns: values.windowTitlePatterns || [],
      category: values.category,
    });
  };

  return <form onSubmit={handleSubmit}>...</form>;
}
```

---

## 6. –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å mock –¥–∞–Ω–Ω—ã–µ:

```typescript
const mockSummary: DailyActivitySummary = {
  date: "2025-11-23",
  computer_name: "PC001",
  username: "ivanov",
  active_seconds: 16080,   // 4—á 28–º–∏–Ω
  idle_seconds: 21840,     // 6—á 4–º–∏–Ω
  offline_seconds: 48600,  // 13—á 30–º–∏–Ω
  top_programs: [
    {
      process_name: "chrome.exe",
      friendly_name: "Google Chrome",
      duration_sec: 8100,  // 2—á 15–º–∏–Ω
      window_titles: [
        "–ü–æ—á—Ç–∞ ‚Äî mail.yandex.ru",
        "–î–æ–∫—É–º–µ–Ω—Ç—ã ‚Äî docs.google.com",
        "GitHub ‚Äî github.com"
      ]
    },
    {
      process_name: "1C.exe",
      friendly_name: "1–° –ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ",
      duration_sec: 5400,  // 1—á 30–º–∏–Ω
      window_titles: []
    },
    {
      process_name: "WINWORD.EXE",
      friendly_name: "Microsoft Word",
      duration_sec: 2700,  // 45–º–∏–Ω
      window_titles: [
        "–î–æ–≥–æ–≤–æ—Ä_2025.docx",
        "–û—Ç—á–µ—Ç_–Ω–æ—è–±—Ä—å.docx"
      ]
    }
  ]
};
```

---

## 7. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1 (MVP):
1. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–û—Ç—á–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏" —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
2. ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π (–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å/–ø—Ä–æ—Å—Ç–æ–π/–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ)
3. ‚úÖ –¢–∞–±–ª–∏—Ü–∞ "–¢–æ–ø –ø—Ä–æ–≥—Ä–∞–º–º" —Å –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é

### –§–∞–∑–∞ 2:
4. ‚úÖ Timeline chart –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ —á–∞—Å–∞–º
5. ‚úÖ –†–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è –¥–µ—Ç–∞–ª–∏ window_titles –≤ —Ç–∞–±–ª–∏—Ü–µ
6. ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞ –≤ PDF/Excel

### –§–∞–∑–∞ 3:
7. ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å "–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º"
8. ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è process catalog
9. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ friendly names –≤ –æ—Ç—á–µ—Ç–∞—Ö

---

## 8. –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

‚ö†Ô∏è **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**

### 8.1. Friendly names –ù–ï –†–ê–ë–û–¢–ê–Æ–¢ (–∫—Ä–∏—Ç–∏—á–Ω–æ!)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª–µ `friendly_name` –≤ –æ—Ç–≤–µ—Ç–µ API **–≤—Å–µ–≥–¥–∞ —Ä–∞–≤–Ω–æ `process_name`**. 

**–ü—Ä–∏—á–∏–Ω–∞:** Backend –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª JOIN –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ `program_usage_daily` –∏ `process_catalog`. –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ç–æ–ª—å–∫–æ raw executable names.

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –í UI –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ `process_name` (chrome.exe, WINWORD.EXE)
- –ö–æ–≥–¥–∞ –∞–¥–º–∏–Ω —Å–æ–∑–¥–∞—Å—Ç mapping –≤ Process Catalog, —ç—Ç–æ **–ø–æ–∫–∞ –Ω–µ –ø–æ–≤–ª–∏—è–µ—Ç** –Ω–∞ –æ—Ç—á–µ—Ç—ã
- –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –∫–æ–¥ —Ç–∞–∫, —á—Ç–æ–±—ã –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ `friendly_name !== process_name` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å friendly name
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å note –≤ UI: "–£–¥–æ–±–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞"

**–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "process_name": "chrome.exe",
  "friendly_name": "chrome.exe"  // <-- –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ!
}
```

---

### 8.2. API –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 500 –æ—à–∏–±–∫—É (–∫—Ä–∏—Ç–∏—á–Ω–æ!)

**–ü—Ä–æ–±–ª–µ–º–∞:** Endpoint `/api/activity/summary` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç ClickHouse materialized views, –∫–æ—Ç–æ—Ä—ã–µ **–Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**.

**–ü—Ä–∏—á–∏–Ω–∞:** `init.sql` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω –≤—Ä—É—á–Ω—É—é –Ω–∞ ClickHouse –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- ‚úÖ –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É 500 –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–∫–∞–∂–∏—Ç–µ –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: "–î–∞–Ω–Ω—ã–µ –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤—ã. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–Ω–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ —Ä–∞–±–æ—Ç–∞—é—â–∏–π backend)
- ‚úÖ –î–æ–±–∞–≤—å—Ç–µ retry –ª–æ–≥–∏–∫—É —Å exponential backoff

**–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```typescript
const { data, error } = useQuery({
  queryKey: ['activity-summary', computerName, date],
  queryFn: fetchSummary,
  retry: 3,
  retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),
});

if (error?.status === 500) {
  return <DatabaseNotInitializedError />;
}
```

---

### 8.3. URL extraction —Ä–∞–±–æ—Ç–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–≥–µ–Ω—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç URL –∏–∑ window titles —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –±—Ä–∞—É–∑–µ—Ä–æ–≤.

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ Chrome (–∞–Ω–≥–ª–∏–π—Å–∫–∞—è –≤–µ—Ä—Å–∏—è): "Page Title - domain.com - Google Chrome"
- ‚úÖ Firefox: "Page Title - Mozilla Firefox"

**–ß—Ç–æ –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å:**
- ‚ùå –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã (—Ä—É—Å—Å–∫–∏–π Chrome/Firefox)
- ‚ùå Edge/Chromium —Å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏
- ‚ùå –í–∫–ª–∞–¥–∫–∏ –±–µ–∑ URL (–Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ `window_title` –∫–∞–∫ –µ—Å—Ç—å
- –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç "Title ‚Äî domain.com", –º–æ–∂–µ—Ç–µ –≤—ã–¥–µ–ª–∏—Ç—å domain –æ—Ç–¥–µ–ª—å–Ω–æ
- –ù–µ –ø—ã—Ç–∞–π—Ç–µ—Å—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–∞—Ä—Å–∏—Ç—å - –º–æ–∂–µ—Ç–µ —Å–ª–æ–º–∞—Ç—å

---

### 8.4. Empty data - –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** `top_programs` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º, `active_seconds: 0` - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

**–ü—Ä–∏—á–∏–Ω—ã:**
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å
- –ê–≥–µ–Ω—Ç –Ω–µ –±—ã–ª –∑–∞–ø—É—â–µ–Ω
- –î–∞–Ω–Ω—ã–µ –µ—â–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- ‚úÖ –ü–æ–∫–∞–∂–∏—Ç–µ empty state —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é –¥–∞—Ç—É
- ‚úÖ –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫—É - —ç—Ç–æ –≤–∞–ª–∏–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

---

## 9. –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–∞ —Ä–µ–≤—å—é —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–û—Ç—á–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ —Ç—Ä–∏ –º–µ—Ç—Ä–∏–∫–∏
- [ ] –ü—Ä–æ—Ü–µ–Ω—Ç—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è
- [ ] –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç (4—á 28–º–∏–Ω –≤–º–µ—Å—Ç–æ 16080)
- [ ] –¢–∞–±–ª–∏—Ü–∞ —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- [ ] Window titles —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–ü–æ–∫–∞–∑–∞—Ç—å"
- [ ] Loading states –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- [ ] Empty states –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–æ–≥–¥–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö
- [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å –∑–∞–ø–∏—Å–∏
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–µ–ª—å–∑—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è)
- [ ] Responsive design —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–æ–≤
- [ ] –ï—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API

---

## 10. –í–æ–ø—Ä–æ—Å—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ—è—Å–Ω–æ –∏–ª–∏ –Ω—É–∂–Ω—ã —É—Ç–æ—á–Ω–µ–Ω–∏—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ `FRONTEND_SPECIFICATION.md`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∫ –∑–∞–¥–∞—á–µ

–£–¥–∞—á–∏! üöÄ
